    <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Saving Unique Twitter ID&#39;s &amp;amp; MySQL Integers &middot; { always: &#39;coding&#39; } </title>
    
    <link rel="stylesheet" type="text/css" href="http://alwayscoding.ca/css/uno.min.css" />
    <link rel="stylesheet" type="text/css" href="http://alwayscoding.ca/css/lightGallery.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://alwayscoding.ca/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="http://alwayscoding.ca/favicon.ico">
    
    <link href="" rel="alternate" type="application/rss+xml" title="{ always: &#39;coding&#39; }" />
    
    <script src="http://alwayscoding.ca/js/jquery.min.js"></script>
    <script src="http://alwayscoding.ca/js/main.min.js">
    </script>
</head>

    <body>
        <div id="scriptHeader">
    <span class="mobile btn-mobile-menu">
            <i class="fa fa-bars btn-mobile-menu__icon"></i>
            <i class="fa fa-times btn-mobile-close__icon hidden"> </i>
    </span>
    <header class="
        
            panel-cover panel-cover--collapsed
        "  style="background-image: url(/images/side-column-bg.jpg)" >
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content"> 
                <a href="http://alwayscoding.ca/" title="link to homepage for { always: &#39;coding&#39; }"> <img src="http://www.gravatar.com/avatar/c15ec5b29cc5407a01bd17907e41230b?s=160" width="80" alt="{ always: &#39;coding&#39; } logo" class="panel-cover__logo logo" /> </a> 
                <h1 class="panel-cover__title panel-title">
                    <a href="http://alwayscoding.ca/"  title="link to homepage for { always: &#39;coding&#39; }">{ always: &#39;coding&#39; }</a>
                </h1>
                <hr class="panel-cover__divider" />
                <p class="panel-cover__description">  Brian Pearce  </p>
                <hr class="panel-cover__divider panel-cover__divider--secondary" />
                <div class="navigation-wrapper">
                    <nav class="cover-navigation cover-navigation--primary">
                        <ul class="navigation">
                            <li class="navigation__item"><a href="http://alwayscoding.ca#blog" title="link to { always: &#39;coding&#39; } blog" class="blog-button">Blog</a> </li>
                            <li class="navigation__item"><a href="http://alwayscoding.caposts" title="The blog archive" class="blog-button">Archive</a> </li></br>
                            
                            
                       </ul>
                    </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/brian_pearce" title="@brian_pearce on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="http://no.linkedin.com/in/brian-pearce/en" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
        </li>   
        
        <li class="navigation__item">
            <a href="https://github.com/brianp" title="brianp on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br>  </ul>
</nav>
 </div>
            </div>
        </div>
        <div class="panel-cover--overlay"></div>
    </div>
</header>
</div>
<noscript>
    <style>
        #scriptHeader {display:none;}
        .navigation-wrapper{
            display: block;
            top: 0;
        }
    </style>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/side-column-bg.jpg)">
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content"> 
                    <a href="http://alwayscoding.ca/" title="link to homepage for { always: &#39;coding&#39; }"> <img src="http://www.gravatar.com/avatar/c15ec5b29cc5407a01bd17907e41230b?s=160" width="80" alt="{ always: &#39;coding&#39; } logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="http://alwayscoding.ca/"  title="link to homepage for { always: &#39;coding&#39; }">{ always: &#39;coding&#39; }</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  Brian Pearce  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                        <nav class="cover-navigation cover-navigation--primary">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="http://alwayscoding.ca/#blog" title="link to { always: &#39;coding&#39; } blog" class="blog-button">Blog</a> </li></br>
                                
                                
                           </ul>
                        </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/brian_pearce" title="@brian_pearce on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="http://no.linkedin.com/in/brian-pearce/en" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
        </li>   
        
        <li class="navigation__item">
            <a href="https://github.com/brianp" title="brianp on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br>  </ul>
</nav>
 </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</noscript>

        <div class="content-wrapper">
            <div class="content-wrapper__inner">
                <div class="post">
                    <h1>Saving Unique Twitter ID&#39;s &amp;amp; MySQL Integers</h1>
                    <span class="post-date">Sat, Feb 12, 2011</span>
                    <p>TLDR; Don&rsquo;t store Tweet ID&rsquo;s as INT. Use BIGINT.</p>

<p>While writing a Twitter application in Rails I was having an issue saving tweets to the database.</p>

<p>A quick brief on the application: The app would download tweets from the mention timeline of a particular user. It would only download tweets it hadn&rsquo;t already processed based on the last saved tweets unique id (as set by twitter). All the data from the tweets were making it into the database as expected but every time the application downloaded tweets it would re-download the same tweets.</p>

<p>After being quite perplexed for a period of time and trying many different solutions I realized that Twitters unique tweet ID did not match the tweet_id being stored locally. This was caused by the sheer size of Twitters id number. I was storing it as an INT which can only go
up to 2147483647 (MySQL). Where Twitters current tweet id&rsquo;s reside in around 36331797625184256.</p>

<p>I would need to use MySQL&rsquo;s BIGINT which can go up to 9223372036854775807 to be able to save the id as a number.</p>

<p>Unfortunately BIGINT ins&rsquo;t a standard type to set via rails migrations.
As per this post by <a href='http://spin.atomicobject.com/2011/05/19/ruby-on-rails-and-mysql-bigint/'>Dustin Tinney - Ruby on Rails &amp; MYSQL BIGINT</a> the proper way to use big int is to create a regular integer column via migrations and the change the column to BIGINT.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span><span style="color: #008800; font-weight: bold">def</span> <span style="color: #BB0066; font-weight: bold">self</span><span style="color: #333333">.</span><span style="color: #0066BB; font-weight: bold">up</span>
  create_table(<span style="color: #AA6600">:people</span>) <span style="color: #008800; font-weight: bold">do</span> <span style="color: #333333">|</span>t<span style="color: #333333">|</span>
    t<span style="color: #333333">.</span>integer <span style="color: #AA6600">:number_of_facebook_friends</span>
  <span style="color: #008800; font-weight: bold">end</span>

  change_column <span style="color: #AA6600">:people</span>, <span style="color: #AA6600">:number_of_facebook_friends</span>, <span style="color: #AA6600">:bigint</span>
<span style="color: #008800; font-weight: bold">end</span>
</pre></div>

                </div>
            </div>
        </div>
    </body>
    
</html>
